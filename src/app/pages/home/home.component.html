<header>
    <app-header
        [title]="headerTitle"
        [placeholder]="'home.header.search' | translate"
    ></app-header>
</header>
<main class="md:max-w-4xl md:mx-auto">
    <div class="flex justify-between m-4">
        <h1 class="text-[22px]">{{ 'home.progress' | translate }}</h1>
    </div>
    <app-daily-task
        [title]="'components.dailyTasks.title' | translate"
        [tasks]="todayTasks"
    ></app-daily-task>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 m-4">
        <section>
            <div class="flex justify-between items-baseline mb-4">
                <h1 class="text-[22px]">{{ 'home.today' | translate }}</h1>
                <app-toggle-button
                    [isExpanded]="showAllTodayTasks"
                    [onText]="'home.btns.less' | translate"
                    [offText]="'home.btns.all' | translate"
                    (toggle)="toggleShowAllTasksToday($event)"
                ></app-toggle-button>
            </div>
            <div class="flex flex-col gap-4">
                <ng-container *ngIf="todayTasks.length > 0; else noTasksToday">
                    <app-task-card
                        *ngFor="
                            let task of showAllTodayTasks
                                ? todayTasks
                                : todayTasks.slice(0, 3)
                        "
                        [id]="task.id"
                        [title]="task.title"
                        [date]="task.startAt"
                        [priority]="task.priority"
                        [isCompleted]="task.completed"
                        (statusChange)="
                            updateTaskStatus($event.id, $event.completed)
                        "
                        (navigateToTask)="navigateToTask($event)"
                    >
                    </app-task-card>
                </ng-container>
                <ng-template #noTasksToday>
                    <div
                        class="flex w-full h-20 bg-gray items-center text-center justify-center rounded-lg"
                    >
                        <span class="text-lg opacity-60">{{
                            'home.tasks.todayPlaceholder' | translate
                        }}</span>
                    </div>
                </ng-template>
            </div>
        </section>

        <section>
            <div class="flex justify-between items-baseline mb-4">
                <h1 class="text-[22px]">Tomorrow Task</h1>
                <app-toggle-button
                    [isExpanded]="showAllTomorrowTasks"
                    [onText]="'home.btns.less' | translate"
                    [offText]="'home.btns.all' | translate"
                    (toggle)="toggleShowAllTomorrowTasks($event)"
                ></app-toggle-button>
            </div>
            <div class="flex flex-col gap-4">
                <ng-container
                    *ngIf="tomorrowTasks.length > 0; else noTasksTomorrow"
                >
                    <app-task-card
                        *ngFor="
                            let task of showAllTomorrowTasks
                                ? tomorrowTasks
                                : tomorrowTasks.slice(0, 3)
                        "
                        [id]="task.id"
                        [title]="task.title"
                        [date]="task.startAt"
                        [priority]="task.priority"
                        [isCompleted]="task.completed"
                        (statusChange)="
                            updateTaskStatus($event.id, $event.completed)
                        "
                        (navigateToTask)="navigateToTask($event)"
                    >
                    </app-task-card>
                </ng-container>
                <ng-template #noTasksTomorrow>
                    <div
                        class="flex w-full h-20 bg-gray items-center text-center justify-center rounded-lg"
                    >
                        <span class="text-lg opacity-60">{{
                            'home.tasks.tomorrowPlaceholder' | translate
                        }}</span>
                    </div>
                </ng-template>
            </div>
        </section>
    </div>

    <section class="mt-8 m-4">
        <div class="flex justify-between items-baseline mb-4">
            <h1 class="text-[22px]">All Tasks</h1>
            <app-toggle-button
                [isExpanded]="showAllTasks"
                [onText]="'home.btns.less' | translate"
                [offText]="'home.btns.all' | translate"
                (toggle)="toggleListAllTasks($event)"
            ></app-toggle-button>
        </div>
        <div class="flex flex-col gap-4">
            <ng-container *ngIf="allTasks.length > 0; else noTasks">
                <app-task-card
                    *ngFor="
                        let task of showAllTasks
                            ? allTasks
                            : allTasks.slice(0, 3)
                    "
                    [id]="task.id"
                    [title]="task.title"
                    [date]="task.startAt"
                    [priority]="task.priority"
                    [isCompleted]="task.completed"
                    (statusChange)="
                        updateTaskStatus($event.id, $event.completed)
                    "
                    (navigateToTask)="navigateToTask($event)"
                >
                </app-task-card>
            </ng-container>
            <ng-template #noTasks>
                <div
                    class="flex w-full h-20 bg-gray items-center text-center justify-center rounded-lg"
                >
                    <span class="text-lg opacity-60">{{
                        'home.tasks.allTasksPlaceholder' | translate
                    }}</span>
                </div>
            </ng-template>
        </div>
    </section>

    <app-button-create (navigate)="navigate()"></app-button-create>
</main>
